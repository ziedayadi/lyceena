<h1 mat-dialog-title>Modifier session</h1>
<div mat-dialog-content class="row">
    <div class="col-12 m-0 p-0">
        <div class="d-flex justify-content-between my-2">
            <label class="col-2 p-0 mt-1">Jour</label>
            <select [disabled]="true" class="browser-default custom-select form-control mr-2  col-5"
                [(ngModel)]="this.oldSession.dayOfWeek.id">
                <option *ngFor="let d of this.days" [value]="d.id">{{d.fr}}</option>
            </select>
            <select class="browser-default custom-select form-control col-5   m-0" required #day="ngModel"
                (change)="onDayChange($event.target.value)" [(ngModel)]="this.newSession.dayId"> 
                <option *ngFor="let d of this.getFreeDays()" [value]="d.id">{{d.fr}}</option>
            </select>
        </div>

        <div class="d-flex justify-content-between my-2">
            <label class="col-2 p-0 mt-1">De:</label>
            <select [disabled]="true" class="browser-default custom-select form-control mr-2  col-5"
                [(ngModel)]="this.oldSession.startHour.id">
                <option *ngFor="let h of this.hours" [value]="h.id">{{h.code}}</option>
            </select>
            <select class="browser-default custom-select form-control mr-2  col-5" required #startHour="ngModel"
                (change)="onStartHourChange($event.target.value)" [(ngModel)]="this.newSession.startHourId">
                <option *ngFor="let h of this.getFreeHours()" [value]="h.id">{{h.code}}</option>
            </select>
        </div>

        <div class="d-flex justify-content-between my-2">
            <label class="col-2 p-0 mt-1">À:</label>
            <select [disabled]="true" class="browser-default custom-select form-control mr-2  col-5"
                [(ngModel)]="this.oldSession.endHour.id">
                <option *ngFor="let h of this.hours" [value]="h.id">{{h.code}}</option>
            </select>
            <select [disabled]="true" class="browser-default custom-select form-control mr-2  col-5" required #endHour="ngModel"
                [(ngModel)]="this.newSession.endHourId">
                <option *ngFor="let h of this.hours" [value]="h.id">{{h.code}}</option>
            </select>
        </div>

        <div class="d-flex justify-content-between my-2">
            <label class="col-2 p-0 mt-1">Salle:</label>
            <select [disabled]="true" class="browser-default custom-select form-control mr-2  col-5"
                [(ngModel)]="this.oldSession.classRoom.id">
                <option *ngFor="let cr of this.classRooms" [value]="cr.id">{{cr.name}}</option>
            </select>
            <select class="browser-default custom-select form-control mr-2  col-5" required #classRoom="ngModel"
                [(ngModel)]="this.newSession.classRoomId" >
                <option *ngFor="let cr of this.freeClassRooms" [value]="cr.id">{{cr.name}}</option>
            </select>
        </div>
        <div *ngIf="classRoom.invalid && (classRoom.dirty || classRoom.touched)" class="alert alert-danger">
            <div *ngIf="classRoom.errors.required">
                Salle est obligatoire
            </div>
        </div>
        <div *ngIf="day.invalid && (day.dirty || day.touched)" class="alert alert-danger">
            <div *ngIf="day.errors.required">
                Le jour est obligatoire
            </div>
        </div>
        <div *ngIf="startHour.invalid && (startHour.dirty || startHour.touched)" class="alert alert-danger">
            <div *ngIf="startHour.errors.required">
                Heure de début de la session est obligatoir
            </div>
        </div>
        
    </div>
    <div class="d-flex justify-content-center">
        <button class="btn  btn-success btn-sm mr-2" (click)="onOk()" [disabled]="classRoom.invalid">OK</button>
        <button class="btn  btn-danger btn-sm" (click)="onCancel()">Annuler</button>
    </div>
</div>